{{define "content"}}

<!-- Breadcrumb -->
<nav class="bg-white manual-border-b">
  <div class="container mx-auto px-4 py-3">
    <ol class="flex items-center space-x-2 text-sm font-mono uppercase">
      <li><a href="/" class="text-gray-600 hover:text-black">Home</a></li>
      <li class="text-gray-400">/</li>
      <li class="text-black font-bold">Whitepapers</li>
    </ol>
  </div>
</nav>

<!-- Page Header -->
<section class="bg-white py-16 manual-border-b">
  <div class="container mx-auto px-4">
    <div class="max-w-4xl mx-auto text-center">
      <div class="inline-block bg-black text-white px-4 py-2 manual-border manual-shadow text-sm font-mono uppercase mb-6">
        Knowledge Base
      </div>
      <h1 class="text-5xl md:text-6xl font-bold font-mono uppercase mb-6">Whitepapers & Resources</h1>
      <p class="text-xl text-gray-600 font-mono">
        IN-DEPTH RESEARCH AND INSIGHTS TO HELP YOU MAKE INFORMED DECISIONS.
      </p>
    </div>
  </div>
</section>

<!-- Filter and Grid Section -->
<section class="py-16 bg-gray-50">
  <div class="container mx-auto px-4">

    <!-- Filter Bar -->
    <div class="max-w-7xl mx-auto mb-12">
      <div class="bg-white manual-border manual-shadow-lg p-6">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
          <div class="flex items-center gap-4">
            <span class="material-symbols-outlined text-2xl">filter_list</span>
            <h2 class="text-xl font-bold font-mono uppercase">Filter By Topic</h2>
          </div>

          <form method="GET" action="/whitepapers" class="flex items-center gap-4">
            <select name="topic" onchange="this.form.submit()" class="bg-white manual-border px-4 py-3 font-mono uppercase text-sm focus:outline-none focus:manual-shadow">
              <option value="">All Topics</option>
              {{range .Topics}}
              <option value="{{.ID}}" {{if eq $.SelectedTopicID .ID}}selected{{end}}>{{.Name}}</option>
              {{end}}
            </select>
          </form>

          <div class="text-sm font-mono uppercase text-gray-600">
            <span class="font-bold text-black">{{.TotalCount}}</span> {{if eq .TotalCount 1}}Whitepaper{{else}}Whitepapers{{end}}
          </div>
        </div>
      </div>
    </div>

    <!-- Whitepapers Grid -->
    {{if .Whitepapers}}
    <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {{range .Whitepapers}}
      <div class="group bg-white manual-border manual-shadow hover:manual-shadow-lg transition-all duration-200 hover:-translate-y-1">
        <!-- Cover Preview -->
        <div class="aspect-video manual-border-b flex items-center justify-center" style="background: linear-gradient(to bottom right, {{.CoverColorFrom}}, {{.CoverColorTo}})">
          <span class="material-symbols-outlined text-6xl text-white opacity-80">description</span>
        </div>

        <!-- Card Content -->
        <div class="p-6">
          <!-- Topic Badge -->
          {{if .TopicName}}
          <div class="mb-4">
            <span class="inline-block px-3 py-1 manual-border text-xs font-mono uppercase font-bold" style="background-color: {{.TopicColorHex}}20; color: {{.TopicColorHex}}; border-color: {{.TopicColorHex}}">
              {{.TopicName}}
            </span>
          </div>
          {{end}}

          <!-- Title -->
          <h3 class="text-2xl font-bold font-mono uppercase mb-3 group-hover:text-[#0066CC] transition-colors">
            {{.Title}}
          </h3>

          <!-- Description -->
          <p class="text-gray-600 font-mono mb-4 line-clamp-3">
            {{.Description}}
          </p>

          <!-- File Size -->
          {{if .FileSize}}
          <div class="flex items-center gap-2 text-xs font-mono uppercase text-gray-500 mb-6">
            <span class="material-symbols-outlined text-sm">attach_file</span>
            <span>PDF &middot; {{.FileSize}}</span>
          </div>
          {{end}}

          <!-- Download Link -->
          <a href="/whitepapers/{{.Slug}}" class="inline-flex items-center gap-2 bg-black text-white px-5 py-3 manual-border manual-shadow hover:manual-shadow-lg font-mono uppercase text-sm font-bold hover:-translate-y-1 transition-all btn-press">
            <span class="material-symbols-outlined text-sm">download</span>
            <span>Download</span>
          </a>
        </div>
      </div>
      {{end}}
    </div>
    {{else}}
    <!-- Empty State -->
    <div class="max-w-2xl mx-auto text-center py-16">
      <div class="bg-white manual-border manual-shadow-lg p-12">
        <span class="material-symbols-outlined text-8xl text-gray-300 mb-6 block">folder_open</span>
        <h3 class="text-2xl font-bold font-mono uppercase mb-4">No Whitepapers Found</h3>
        <p class="text-gray-600 font-mono mb-6">
          {{if .SelectedTopicID}}
          No whitepapers available for the selected topic. Try selecting a different filter.
          {{else}}
          Check back soon for new whitepapers and resources.
          {{end}}
        </p>
        {{if .SelectedTopicID}}
        <a href="/whitepapers" class="inline-block bg-black text-white px-6 py-3 manual-border manual-shadow hover:manual-shadow-lg font-mono uppercase text-sm font-bold hover:-translate-y-1 transition-all btn-press">
          Clear Filter
        </a>
        {{end}}
      </div>
    </div>
    {{end}}

  </div>
</section>

<!-- CTA Section -->
<section class="bg-[#0066CC] py-16 manual-border-t-thick">
  <div class="container mx-auto px-4">
    <div class="max-w-4xl mx-auto text-center text-white">
      <h2 class="text-4xl md:text-5xl font-bold font-mono uppercase mb-6">
        Need Custom Research?
      </h2>
      <p class="text-xl font-mono mb-8 opacity-90">
        LET'S DISCUSS HOW WE CAN PROVIDE TAILORED INSIGHTS FOR YOUR BUSINESS.
      </p>
      <a href="/contact" class="inline-block bg-white text-[#0066CC] px-8 py-4 manual-border manual-shadow-lg hover:manual-shadow font-mono uppercase text-lg font-bold hover:-translate-y-1 transition-all btn-press">
        Contact Us
      </a>
    </div>
  </div>
</section>

{{end}}
