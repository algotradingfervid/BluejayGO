<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password - Bluejay CMS</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">

    <!-- Component Library -->
    <link rel="stylesheet" href="../../components/main.css">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../../components/tailwind.config.js"></script>
</head>
<body class="login-page">
    <div class="min-h-screen flex flex-col items-center justify-center p-4 md:p-8">

        <!-- Forgot Password Card -->
        <div class="login-card">

            <!-- Back Link -->
            <a href="login.html" class="inline-flex items-center gap-2 font-mono text-xs uppercase text-[var(--color-primary)] hover:underline mb-6">
                <span class="material-symbols-outlined text-sm">arrow_back</span>
                <span>Back to login</span>
            </a>

            <!-- Request Form View -->
            <div id="request-view" class="view active">

                <!-- Logo -->
                <div class="login-logo">
                    <div class="flex items-center gap-3">
                        <div class="w-12 h-12 bg-[var(--color-primary)] manual-border flex items-center justify-center">
                            <span class="material-symbols-outlined text-white text-2xl">memory</span>
                        </div>
                        <span class="font-display text-2xl font-extrabold uppercase text-[var(--color-text-primary)]">Bluejay</span>
                    </div>
                </div>

                <!-- Title -->
                <h1 class="login-title">Forgot Password?</h1>
                <p class="login-subtitle">Enter your email to receive a reset link</p>

                <!-- Rate Limit Warning (hidden by default) -->
                <div class="hidden manual-border bg-[rgba(251,140,0,0.1)] p-4 mb-6" id="rate-limit-warning">
                    <div class="flex items-start gap-3">
                        <span class="material-symbols-outlined text-[var(--color-warning)]">schedule</span>
                        <p class="font-mono text-xs text-[var(--color-warning)]">Too many reset requests. Please wait 5 minutes before trying again.</p>
                    </div>
                </div>

                <!-- Form -->
                <form id="forgot-form" class="login-form" aria-label="Forgot password form" role="form">

                    <!-- Email Field -->
                    <div class="form-field">
                        <label for="email" class="form-label" id="email-label">Email Address</label>
                        <input
                            type="email"
                            id="email"
                            name="email"
                            class="form-input"
                            placeholder="Enter your email"
                            aria-labelledby="email-label"
                            aria-describedby="email-error"
                            aria-invalid="false"
                            aria-required="true"
                            autocomplete="email"
                            required
                        >
                        <div id="email-error" class="hidden text-[var(--color-error)] font-mono text-xs mt-1 flex items-center gap-1" role="alert" aria-live="polite">
                            <span class="material-symbols-outlined text-sm">warning</span>
                            <span>Please enter a valid email address</span>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <button
                        type="submit"
                        class="btn btn-primary btn-block"
                        id="submit-btn"
                    >
                        Send Reset Link
                    </button>

                </form>

            </div>

            <!-- Success View -->
            <div id="success-view" class="view hidden">

                <!-- Logo -->
                <div class="login-logo">
                    <div class="flex items-center gap-3">
                        <div class="w-12 h-12 bg-[var(--color-primary)] manual-border flex items-center justify-center">
                            <span class="material-symbols-outlined text-white text-2xl">memory</span>
                        </div>
                        <span class="font-display text-2xl font-extrabold uppercase text-[var(--color-text-primary)]">Bluejay</span>
                    </div>
                </div>

                <!-- Title -->
                <h1 class="login-title">Check Your Email</h1>
                <p class="login-subtitle">Reset instructions have been sent</p>

                <!-- Success Container -->
                <div class="text-center py-6">
                    <div class="w-16 h-16 bg-[rgba(76,175,80,0.1)] manual-border flex items-center justify-center mx-auto mb-6">
                        <span class="material-symbols-outlined text-4xl text-[var(--color-success)]">mail</span>
                    </div>

                    <p class="font-mono text-xs text-[var(--color-text-secondary)] mb-2">We've sent a password reset link to:</p>
                    <p class="font-mono text-sm font-bold text-[var(--color-text-primary)] mb-2" id="sent-email">user@example.com</p>
                    <p class="font-mono text-xs text-[var(--color-text-secondary)]">The link will expire in 24 hours.</p>
                </div>

                <!-- Resend Section -->
                <div class="mt-6 pt-6 border-t-2 border-black">
                    <p class="text-center font-mono text-xs text-[var(--color-text-secondary)] mb-4">Didn't receive the email?</p>

                    <button
                        type="button"
                        class="btn btn-secondary btn-block"
                        id="resend-btn"
                        onclick="resendEmail()"
                    >
                        Resend Email
                    </button>

                    <p class="font-mono text-[10px] text-[var(--color-text-secondary)] text-center mt-4">
                        Check your spam folder or verify your email address is correct.
                    </p>
                </div>

            </div>

        </div>

        <!-- Footer -->
        <footer class="font-mono text-xs text-[var(--color-text-secondary)] text-center mt-8 uppercase">
            &copy; 2026 Bluejay CMS
        </footer>

    </div>

    <!-- JavaScript for interactions -->
    <script>
        // Form validation and submission
        document.getElementById('forgot-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const email = document.getElementById('email');
            const emailError = document.getElementById('email-error');
            const submitBtn = document.getElementById('submit-btn');

            // Reset errors
            email.classList.remove('error');
            emailError.classList.add('hidden');

            // Validate email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!email.value || !emailRegex.test(email.value)) {
                email.classList.add('error');
                emailError.classList.remove('hidden');
                email.setAttribute('aria-invalid', 'true');
                return;
            }

            // Show loading state
            submitBtn.classList.add('btn-loading');
            submitBtn.disabled = true;

            // Simulate API call
            setTimeout(function() {
                // Store email for display
                document.getElementById('sent-email').textContent = email.value;

                // Switch to success view
                document.getElementById('request-view').classList.add('hidden');
                document.getElementById('request-view').classList.remove('active');
                document.getElementById('success-view').classList.remove('hidden');
                document.getElementById('success-view').classList.add('active');

                // Reset button state
                submitBtn.classList.remove('btn-loading');
                submitBtn.disabled = false;
            }, 2000);
        });

        // Resend email
        function resendEmail() {
            const resendBtn = document.getElementById('resend-btn');

            // Show loading state
            resendBtn.classList.add('btn-loading');
            resendBtn.disabled = true;

            // Simulate API call
            setTimeout(function() {
                resendBtn.classList.remove('btn-loading');
                resendBtn.textContent = 'Email Sent!';

                // Reset after a moment
                setTimeout(function() {
                    resendBtn.textContent = 'Resend Email';
                    resendBtn.disabled = false;
                }, 3000);
            }, 1500);
        }
    </script>
</body>
</html>
