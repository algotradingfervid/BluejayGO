<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Settings - Contact Form - Bluejay CMS</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    <link rel="stylesheet" href="../../components/main.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../../components/tailwind.config.js"></script>
</head>
<body class="bg-background-light">
    <!-- Toast Notification (hidden by default) -->
    <div id="successToast" class="hidden fixed top-4 right-4 z-50">
        <div class="bg-success text-white px-4 py-3 manual-border manual-shadow flex items-center gap-3">
            <span class="material-symbols-outlined">check_circle</span>
            <span class="font-mono text-xs font-bold uppercase">Form settings saved successfully</span>
            <button onclick="hideToast()" class="ml-2 hover:bg-white/20 p-1">
                <span class="material-symbols-outlined text-lg">close</span>
            </button>
        </div>
    </div>

    <!-- Discard Changes Modal (hidden by default) -->
    <div id="discardModal" class="hidden fixed inset-0 z-50 flex items-center justify-center">
        <div class="absolute inset-0 bg-black/50" onclick="hideModal()"></div>
        <div class="relative bg-white manual-border manual-shadow-lg max-w-md w-full mx-4 p-6">
            <h3 class="font-display text-lg font-bold uppercase text-text-primary mb-2">Discard Changes?</h3>
            <p class="font-mono text-xs text-text-secondary mb-6">You have unsaved changes that will be lost if you leave this page.</p>
            <div class="flex justify-end gap-3">
                <button onclick="hideModal()" class="px-4 py-2 manual-border btn-press bg-white font-mono text-xs font-bold uppercase text-text-secondary hover:bg-background-light transition-colors">
                    Keep Editing
                </button>
                <button onclick="window.location.href='list.html'" class="px-4 py-2 manual-border manual-shadow btn-press bg-error text-white font-mono text-xs font-bold uppercase hover:bg-red-700 transition-colors">
                    Discard
                </button>
            </div>
        </div>
    </div>

    <div class="admin-layout">
        <!-- Sidebar -->
        <aside id="sidebar" class="admin-sidebar-light fixed lg:sticky top-0 left-0 h-screen z-50 transform -translate-x-full lg:translate-x-0 transition-transform">
            <!-- Logo -->
            <div class="sidebar-logo">
                <div class="sidebar-logo-icon">
                    <span class="material-symbols-outlined">memory</span>
                </div>
                <span class="sidebar-logo-text">BLUEJAY</span>
            </div>

            <!-- Navigation -->
            <nav class="sidebar-nav">
                <div class="sidebar-section">
                    <div class="sidebar-section-title">Content</div>
                    <a href="../dashboard/index.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">dashboard</span>
                        Dashboard
                    </a>
                    <a href="../homepage/index.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">home</span>
                        Homepage
                    </a>
                    <a href="../about/index.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">info</span>
                        About Us
                    </a>
                    <a href="../products/list.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">inventory_2</span>
                        Products
                    </a>
                    <a href="../solutions/list.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">lightbulb</span>
                        Solutions
                    </a>
                    <a href="../blog/list.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">article</span>
                        Blog
                    </a>
                    <a href="../case-studies/list.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">cases</span>
                        Case Studies
                    </a>
                    <a href="../whitepapers/list.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">menu_book</span>
                        Whitepapers
                    </a>
                </div>
                <div class="sidebar-section">
                    <div class="sidebar-section-title">Resources</div>
                    <a href="../partners/list.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">handshake</span>
                        Partners
                    </a>
                    <a href="../testimonials/list.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">format_quote</span>
                        Testimonials
                    </a>
                    <a href="../certifications/list.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">verified</span>
                        Certifications
                    </a>
                </div>                <div class="sidebar-section">
                    <div class="sidebar-section-title">Global Elements</div>
                    <a href="../header/index.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">web_asset</span>
                        Header
                    </a>
                    <a href="../footer/index.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">call_to_action</span>
                        Footer
                    </a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Admin</div>
                    <a href="../media/library.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">perm_media</span>
                        Media
                    </a>
                    <a href="../forms/list.html" class="sidebar-item active">
                        <span class="material-symbols-outlined sidebar-item-icon">mail</span>
                        Forms
                        <span class="sidebar-item-badge">3</span>
                    </a>
                    <a href="../navigation/list.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">menu</span>
                        Navigation
                    </a>
                    <a href="../users/list.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">group</span>
                        Users
                    </a>
                    <a href="../settings/index.html" class="sidebar-item">
                        <span class="material-symbols-outlined sidebar-item-icon">settings</span>
                        Settings
                    </a>
                </div>
            </nav>

            <!-- User Footer -->
            <div class="sidebar-footer">
                <div class="sidebar-user">
                    <div class="sidebar-user-avatar">JS</div>
                    <div class="sidebar-user-info">
                        <div class="sidebar-user-name">John Smith</div>
                        <div class="sidebar-user-role">Administrator</div>
                    </div>
                </div>
            </div>

            <!-- Close Button (Mobile) -->
            <button onclick="toggleSidebar()" class="absolute top-4 right-4 p-2 lg:hidden manual-border bg-white hover:bg-[var(--color-background-light)]">
                <span class="material-symbols-outlined">close</span>
            </button>
        </aside>

        <!-- Main Content -->
        <main class="admin-main bg-grid-white">
            <!-- Top Navigation Bar -->
            <header class="h-16 bg-white manual-border-thick border-t-0 border-l-0 border-r-0 flex items-center justify-between px-4 lg:px-8 sticky top-0 z-30">
                <!-- Left side - Hamburger (mobile) -->
                <div class="flex items-center gap-4">
                    <button onclick="toggleSidebar()" class="p-2 manual-border hover:bg-[var(--color-background-light)] lg:hidden">
                        <span class="material-symbols-outlined">menu</span>
                    </button>
                    <span class="font-display font-extrabold uppercase lg:hidden">BLUEJAY</span>
                </div>

                <!-- Right side - Actions -->
                <div class="flex items-center gap-2">
                    <button class="p-2 manual-border bg-white hover:bg-[var(--color-primary)] hover:text-white">
                        <span class="material-symbols-outlined">help</span>
                    </button>
                    <button class="p-2 manual-border bg-white hover:bg-[var(--color-primary)] hover:text-white relative">
                        <span class="material-symbols-outlined">notifications</span>
                        <span class="absolute -top-1 -right-1 w-4 h-4 bg-[var(--color-warning)] text-black text-[10px] font-bold flex items-center justify-center manual-border">3</span>
                    </button>
                </div>
            </header>

            <!-- Page Content -->
            <div class="admin-content">
                <!-- Back Link -->
                <a href="list.html" class="inline-flex items-center gap-1 font-mono text-xs text-primary hover:text-primary-dark mb-4 transition-colors">
                    <span class="material-symbols-outlined text-lg">arrow_back</span>
                    <span class="font-bold uppercase">Back to Forms</span>
                </a>

                <!-- Page Header -->
                <div class="page-header mb-6">
                    <div class="page-header-content">
                        <h1 class="page-header-title">Form Settings</h1>
                        <p class="page-header-subtitle">Configure the Contact Form</p>
                    </div>
                </div>

                <!-- Settings Form -->
                <div class="content-card">
                    <form id="settingsForm" class="content-card-body">
                        <!-- Form Name (Read-only) -->
                        <div class="mb-6">
                            <label class="block font-mono text-xs font-bold uppercase text-text-secondary mb-2">Form Name</label>
                            <input
                                type="text"
                                value="Contact Form"
                                disabled
                                class="form-input bg-background-light cursor-not-allowed text-text-secondary"
                            >
                            <p class="mt-1 font-mono text-2xs text-text-secondary">This field cannot be edited</p>
                        </div>

                        <!-- Success Message -->
                        <div class="mb-6">
                            <label class="block font-mono text-xs font-bold uppercase text-text-secondary mb-1">
                                Success Message <span class="text-error">*</span>
                            </label>
                            <p class="font-mono text-2xs text-text-secondary mb-2">Message shown to users after form submission</p>
                            <textarea
                                id="successMessage"
                                rows="4"
                                maxlength="500"
                                oninput="updateCharCount('successMessage', 'successCount', 500); checkChanges()"
                                class="form-input resize-none"
                            >Thank you for contacting us! We have received your message and will get back to you within 24-48 business hours.

If you have an urgent inquiry, please call us at 1-800-BLUEJAY.</textarea>
                            <div class="flex justify-between mt-1">
                                <span id="successError" class="font-mono text-2xs text-error hidden">Please enter a success message</span>
                                <span id="successCount" class="font-mono text-2xs text-text-secondary ml-auto">256 / 500 characters</span>
                            </div>
                        </div>

                        <!-- Description / Internal Notes -->
                        <div class="mb-6">
                            <label class="block font-mono text-xs font-bold uppercase text-text-secondary mb-1">Description (Internal Notes)</label>
                            <p class="font-mono text-2xs text-text-secondary mb-2">Notes visible only to CMS administrators</p>
                            <textarea
                                id="description"
                                rows="5"
                                maxlength="1000"
                                oninput="updateCharCount('description', 'descCount', 1000); checkChanges()"
                                class="form-input resize-none"
                            >This form captures general inquiries from website visitors. All submissions should be reviewed within 24 hours.

Assigned to: Customer Support Team
Escalation: marketing@bluejaypos.com</textarea>
                            <div class="flex justify-end mt-1">
                                <span id="descCount" class="font-mono text-2xs text-text-secondary">178 / 1000 characters</span>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t-2 border-black">
                            <button
                                type="button"
                                onclick="handleCancel()"
                                class="px-6 py-2.5 manual-border btn-press bg-white font-mono text-xs font-bold uppercase text-text-secondary hover:bg-background-light transition-colors"
                            >
                                Cancel
                            </button>
                            <button
                                type="submit"
                                id="saveBtn"
                                class="px-6 py-2.5 manual-border manual-shadow btn-press bg-primary hover:bg-primary-dark text-white font-mono text-xs font-bold uppercase transition-colors inline-flex items-center justify-center gap-2"
                            >
                                <span id="saveBtnText">Save</span>
                                <span id="saveBtnSpinner" class="hidden animate-spin">
                                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                </span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Validation Error State Demo -->
                <div class="mt-8 p-4 bg-background-light manual-border">
                    <p class="font-mono text-xs text-text-secondary mb-3">Demo Controls:</p>
                    <div class="flex flex-wrap gap-2">
                        <button onclick="showValidationError()" class="px-4 py-2 manual-border btn-press bg-error text-white font-mono text-xs font-bold uppercase">Show Validation Error</button>
                        <button onclick="showSaving()" class="px-4 py-2 manual-border btn-press bg-white font-mono text-xs font-bold uppercase hover:bg-background-light">Show Saving State</button>
                        <button onclick="showSuccess()" class="px-4 py-2 manual-border btn-press bg-success text-white font-mono text-xs font-bold uppercase">Show Success Toast</button>
                        <button onclick="toggleUnsavedWarning()" class="px-4 py-2 manual-border btn-press bg-warning text-text-primary font-mono text-xs font-bold uppercase">Toggle Unsaved Warning</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        let originalSuccessMessage = '';
        let originalDescription = '';
        let hasChanges = false;

        document.addEventListener('DOMContentLoaded', function() {
            originalSuccessMessage = document.getElementById('successMessage').value;
            originalDescription = document.getElementById('description').value;
            updateCharCount('successMessage', 'successCount', 500);
            updateCharCount('description', 'descCount', 1000);
        });

        function updateCharCount(textareaId, countId, maxLength) {
            const textarea = document.getElementById(textareaId);
            const counter = document.getElementById(countId);
            const length = textarea.value.length;
            counter.textContent = `${length} / ${maxLength} characters`;
        }

        function checkChanges() {
            const currentSuccess = document.getElementById('successMessage').value;
            const currentDesc = document.getElementById('description').value;
            hasChanges = (currentSuccess !== originalSuccessMessage || currentDesc !== originalDescription);

            const warning = document.getElementById('unsavedWarning');
            const saveBtn = document.getElementById('saveBtnText');

            if (hasChanges) {
                warning.classList.remove('hidden');
                warning.classList.add('flex');
                saveBtn.textContent = 'Save Changes';
            } else {
                warning.classList.add('hidden');
                warning.classList.remove('flex');
                saveBtn.textContent = 'Save';
            }
        }

        function handleCancel() {
            if (hasChanges) {
                document.getElementById('discardModal').classList.remove('hidden');
            } else {
                window.location.href = 'list.html';
            }
        }

        function hideModal() {
            document.getElementById('discardModal').classList.add('hidden');
        }

        function showValidationError() {
            const successMessage = document.getElementById('successMessage');
            const errorSpan = document.getElementById('successError');

            successMessage.value = '';
            successMessage.classList.add('error');
            errorSpan.classList.remove('hidden');
            updateCharCount('successMessage', 'successCount', 500);
        }

        function showSaving() {
            const saveBtn = document.getElementById('saveBtn');
            const btnText = document.getElementById('saveBtnText');
            const spinner = document.getElementById('saveBtnSpinner');

            saveBtn.disabled = true;
            saveBtn.classList.add('opacity-75', 'cursor-not-allowed');
            btnText.textContent = 'Saving...';
            spinner.classList.remove('hidden');

            setTimeout(() => {
                saveBtn.disabled = false;
                saveBtn.classList.remove('opacity-75', 'cursor-not-allowed');
                btnText.textContent = 'Save';
                spinner.classList.add('hidden');
            }, 2000);
        }

        function showSuccess() {
            const toast = document.getElementById('successToast');
            toast.classList.remove('hidden');

            setTimeout(() => {
                toast.classList.add('hidden');
            }, 5000);
        }

        function hideToast() {
            document.getElementById('successToast').classList.add('hidden');
        }

        function toggleUnsavedWarning() {
            const warning = document.getElementById('unsavedWarning');
            warning.classList.toggle('hidden');
            warning.classList.toggle('flex');
        }

        // Form submission
        document.getElementById('settingsForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const successMessage = document.getElementById('successMessage');

            // Validate
            if (!successMessage.value.trim()) {
                showValidationError();
                return;
            }

            // Show saving state
            showSaving();

            // Simulate save
            setTimeout(() => {
                showSuccess();
                originalSuccessMessage = successMessage.value;
                originalDescription = document.getElementById('description').value;
                hasChanges = false;

                const warning = document.getElementById('unsavedWarning');
                warning.classList.add('hidden');
                warning.classList.remove('flex');
                document.getElementById('saveBtnText').textContent = 'Save';
            }, 2000);
        });
    </script>
</body>
</html>
