// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: solutions.sql

package sqlc

import (
	"context"
	"database/sql"
)

const addProductToSolution = `-- name: AddProductToSolution :exec
INSERT INTO solution_products (solution_id, product_id, display_order, is_featured)
VALUES (?, ?, ?, ?)
ON CONFLICT(solution_id, product_id) DO UPDATE SET display_order = excluded.display_order, is_featured = excluded.is_featured
`

type AddProductToSolutionParams struct {
	SolutionID   int64         `json:"solution_id"`
	ProductID    int64         `json:"product_id"`
	DisplayOrder sql.NullInt64 `json:"display_order"`
	IsFeatured   sql.NullBool  `json:"is_featured"`
}

func (q *Queries) AddProductToSolution(ctx context.Context, arg AddProductToSolutionParams) error {
	_, err := q.db.ExecContext(ctx, addProductToSolution,
		arg.SolutionID,
		arg.ProductID,
		arg.DisplayOrder,
		arg.IsFeatured,
	)
	return err
}

const countSolutionsAdminFiltered = `-- name: CountSolutionsAdminFiltered :one
SELECT COUNT(*) FROM solutions
WHERE
    (CASE WHEN ?1 = '' THEN 1 ELSE
        (CASE WHEN ?1 = 'published' THEN is_published = 1
              WHEN ?1 = 'draft' THEN (is_published = 0 OR is_published IS NULL)
              ELSE 1 END)
    END)
    AND (CASE WHEN ?2 = '' THEN 1 ELSE (title LIKE '%' || ?2 || '%') END)
`

type CountSolutionsAdminFilteredParams struct {
	FilterStatus interface{} `json:"filter_status"`
	FilterSearch interface{} `json:"filter_search"`
}

func (q *Queries) CountSolutionsAdminFiltered(ctx context.Context, arg CountSolutionsAdminFilteredParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, countSolutionsAdminFiltered, arg.FilterStatus, arg.FilterSearch)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const createSolution = `-- name: CreateSolution :one
INSERT INTO solutions (
    title, slug, icon, short_description, hero_image_url, hero_title,
    hero_description, overview_content, meta_description, reference_code,
    is_published, display_order
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
RETURNING id, title, slug, icon, short_description, hero_image_url, hero_title, hero_description, overview_content, meta_description, reference_code, is_published, display_order, created_at, updated_at, meta_title, og_image
`

type CreateSolutionParams struct {
	Title            string         `json:"title"`
	Slug             string         `json:"slug"`
	Icon             string         `json:"icon"`
	ShortDescription string         `json:"short_description"`
	HeroImageUrl     sql.NullString `json:"hero_image_url"`
	HeroTitle        sql.NullString `json:"hero_title"`
	HeroDescription  sql.NullString `json:"hero_description"`
	OverviewContent  sql.NullString `json:"overview_content"`
	MetaDescription  sql.NullString `json:"meta_description"`
	ReferenceCode    sql.NullString `json:"reference_code"`
	IsPublished      sql.NullBool   `json:"is_published"`
	DisplayOrder     sql.NullInt64  `json:"display_order"`
}

func (q *Queries) CreateSolution(ctx context.Context, arg CreateSolutionParams) (Solution, error) {
	row := q.db.QueryRowContext(ctx, createSolution,
		arg.Title,
		arg.Slug,
		arg.Icon,
		arg.ShortDescription,
		arg.HeroImageUrl,
		arg.HeroTitle,
		arg.HeroDescription,
		arg.OverviewContent,
		arg.MetaDescription,
		arg.ReferenceCode,
		arg.IsPublished,
		arg.DisplayOrder,
	)
	var i Solution
	err := row.Scan(
		&i.ID,
		&i.Title,
		&i.Slug,
		&i.Icon,
		&i.ShortDescription,
		&i.HeroImageUrl,
		&i.HeroTitle,
		&i.HeroDescription,
		&i.OverviewContent,
		&i.MetaDescription,
		&i.ReferenceCode,
		&i.IsPublished,
		&i.DisplayOrder,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.MetaTitle,
		&i.OgImage,
	)
	return i, err
}

const createSolutionCTA = `-- name: CreateSolutionCTA :one
INSERT INTO solution_ctas (
    solution_id, heading, subheading, primary_button_text,
    primary_button_url, secondary_button_text, secondary_button_url,
    phone_number, section_name
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
RETURNING id, solution_id, heading, subheading, primary_button_text, primary_button_url, secondary_button_text, secondary_button_url, phone_number, section_name
`

type CreateSolutionCTAParams struct {
	SolutionID          int64          `json:"solution_id"`
	Heading             string         `json:"heading"`
	Subheading          sql.NullString `json:"subheading"`
	PrimaryButtonText   sql.NullString `json:"primary_button_text"`
	PrimaryButtonUrl    sql.NullString `json:"primary_button_url"`
	SecondaryButtonText sql.NullString `json:"secondary_button_text"`
	SecondaryButtonUrl  sql.NullString `json:"secondary_button_url"`
	PhoneNumber         sql.NullString `json:"phone_number"`
	SectionName         string         `json:"section_name"`
}

func (q *Queries) CreateSolutionCTA(ctx context.Context, arg CreateSolutionCTAParams) (SolutionCta, error) {
	row := q.db.QueryRowContext(ctx, createSolutionCTA,
		arg.SolutionID,
		arg.Heading,
		arg.Subheading,
		arg.PrimaryButtonText,
		arg.PrimaryButtonUrl,
		arg.SecondaryButtonText,
		arg.SecondaryButtonUrl,
		arg.PhoneNumber,
		arg.SectionName,
	)
	var i SolutionCta
	err := row.Scan(
		&i.ID,
		&i.SolutionID,
		&i.Heading,
		&i.Subheading,
		&i.PrimaryButtonText,
		&i.PrimaryButtonUrl,
		&i.SecondaryButtonText,
		&i.SecondaryButtonUrl,
		&i.PhoneNumber,
		&i.SectionName,
	)
	return i, err
}

const createSolutionChallenge = `-- name: CreateSolutionChallenge :one
INSERT INTO solution_challenges (solution_id, title, description, icon, display_order)
VALUES (?, ?, ?, ?, ?)
RETURNING id, solution_id, title, description, icon, display_order
`

type CreateSolutionChallengeParams struct {
	SolutionID   int64         `json:"solution_id"`
	Title        string        `json:"title"`
	Description  string        `json:"description"`
	Icon         string        `json:"icon"`
	DisplayOrder sql.NullInt64 `json:"display_order"`
}

func (q *Queries) CreateSolutionChallenge(ctx context.Context, arg CreateSolutionChallengeParams) (SolutionChallenge, error) {
	row := q.db.QueryRowContext(ctx, createSolutionChallenge,
		arg.SolutionID,
		arg.Title,
		arg.Description,
		arg.Icon,
		arg.DisplayOrder,
	)
	var i SolutionChallenge
	err := row.Scan(
		&i.ID,
		&i.SolutionID,
		&i.Title,
		&i.Description,
		&i.Icon,
		&i.DisplayOrder,
	)
	return i, err
}

const createSolutionPageFeature = `-- name: CreateSolutionPageFeature :one
INSERT INTO solution_page_features (title, description, icon, display_order, is_active)
VALUES (?, ?, ?, ?, ?)
RETURNING id, title, description, icon, display_order, is_active
`

type CreateSolutionPageFeatureParams struct {
	Title        string        `json:"title"`
	Description  string        `json:"description"`
	Icon         string        `json:"icon"`
	DisplayOrder sql.NullInt64 `json:"display_order"`
	IsActive     sql.NullBool  `json:"is_active"`
}

func (q *Queries) CreateSolutionPageFeature(ctx context.Context, arg CreateSolutionPageFeatureParams) (SolutionPageFeature, error) {
	row := q.db.QueryRowContext(ctx, createSolutionPageFeature,
		arg.Title,
		arg.Description,
		arg.Icon,
		arg.DisplayOrder,
		arg.IsActive,
	)
	var i SolutionPageFeature
	err := row.Scan(
		&i.ID,
		&i.Title,
		&i.Description,
		&i.Icon,
		&i.DisplayOrder,
		&i.IsActive,
	)
	return i, err
}

const createSolutionStat = `-- name: CreateSolutionStat :one
INSERT INTO solution_stats (solution_id, value, label, display_order)
VALUES (?, ?, ?, ?)
RETURNING id, solution_id, value, label, display_order
`

type CreateSolutionStatParams struct {
	SolutionID   int64         `json:"solution_id"`
	Value        string        `json:"value"`
	Label        string        `json:"label"`
	DisplayOrder sql.NullInt64 `json:"display_order"`
}

func (q *Queries) CreateSolutionStat(ctx context.Context, arg CreateSolutionStatParams) (SolutionStat, error) {
	row := q.db.QueryRowContext(ctx, createSolutionStat,
		arg.SolutionID,
		arg.Value,
		arg.Label,
		arg.DisplayOrder,
	)
	var i SolutionStat
	err := row.Scan(
		&i.ID,
		&i.SolutionID,
		&i.Value,
		&i.Label,
		&i.DisplayOrder,
	)
	return i, err
}

const createSolutionsListingCTA = `-- name: CreateSolutionsListingCTA :one
INSERT INTO solutions_listing_cta (
    heading, subheading, primary_button_text, primary_button_url,
    secondary_button_text, secondary_button_url, is_active
) VALUES (?, ?, ?, ?, ?, ?, ?)
RETURNING id, heading, subheading, primary_button_text, primary_button_url, secondary_button_text, secondary_button_url, is_active
`

type CreateSolutionsListingCTAParams struct {
	Heading             string         `json:"heading"`
	Subheading          sql.NullString `json:"subheading"`
	PrimaryButtonText   sql.NullString `json:"primary_button_text"`
	PrimaryButtonUrl    sql.NullString `json:"primary_button_url"`
	SecondaryButtonText sql.NullString `json:"secondary_button_text"`
	SecondaryButtonUrl  sql.NullString `json:"secondary_button_url"`
	IsActive            sql.NullBool   `json:"is_active"`
}

func (q *Queries) CreateSolutionsListingCTA(ctx context.Context, arg CreateSolutionsListingCTAParams) (SolutionsListingCtum, error) {
	row := q.db.QueryRowContext(ctx, createSolutionsListingCTA,
		arg.Heading,
		arg.Subheading,
		arg.PrimaryButtonText,
		arg.PrimaryButtonUrl,
		arg.SecondaryButtonText,
		arg.SecondaryButtonUrl,
		arg.IsActive,
	)
	var i SolutionsListingCtum
	err := row.Scan(
		&i.ID,
		&i.Heading,
		&i.Subheading,
		&i.PrimaryButtonText,
		&i.PrimaryButtonUrl,
		&i.SecondaryButtonText,
		&i.SecondaryButtonUrl,
		&i.IsActive,
	)
	return i, err
}

const deleteSolution = `-- name: DeleteSolution :exec
DELETE FROM solutions WHERE id = ?
`

func (q *Queries) DeleteSolution(ctx context.Context, id int64) error {
	_, err := q.db.ExecContext(ctx, deleteSolution, id)
	return err
}

const deleteSolutionCTA = `-- name: DeleteSolutionCTA :exec
DELETE FROM solution_ctas WHERE id = ?
`

func (q *Queries) DeleteSolutionCTA(ctx context.Context, id int64) error {
	_, err := q.db.ExecContext(ctx, deleteSolutionCTA, id)
	return err
}

const deleteSolutionCTAsBySolutionID = `-- name: DeleteSolutionCTAsBySolutionID :exec
DELETE FROM solution_ctas WHERE solution_id = ?
`

func (q *Queries) DeleteSolutionCTAsBySolutionID(ctx context.Context, solutionID int64) error {
	_, err := q.db.ExecContext(ctx, deleteSolutionCTAsBySolutionID, solutionID)
	return err
}

const deleteSolutionChallenge = `-- name: DeleteSolutionChallenge :exec
DELETE FROM solution_challenges WHERE id = ?
`

func (q *Queries) DeleteSolutionChallenge(ctx context.Context, id int64) error {
	_, err := q.db.ExecContext(ctx, deleteSolutionChallenge, id)
	return err
}

const deleteSolutionChallengesBySolutionID = `-- name: DeleteSolutionChallengesBySolutionID :exec
DELETE FROM solution_challenges WHERE solution_id = ?
`

func (q *Queries) DeleteSolutionChallengesBySolutionID(ctx context.Context, solutionID int64) error {
	_, err := q.db.ExecContext(ctx, deleteSolutionChallengesBySolutionID, solutionID)
	return err
}

const deleteSolutionPageFeature = `-- name: DeleteSolutionPageFeature :exec
DELETE FROM solution_page_features WHERE id = ?
`

func (q *Queries) DeleteSolutionPageFeature(ctx context.Context, id int64) error {
	_, err := q.db.ExecContext(ctx, deleteSolutionPageFeature, id)
	return err
}

const deleteSolutionProductsBySolutionID = `-- name: DeleteSolutionProductsBySolutionID :exec
DELETE FROM solution_products WHERE solution_id = ?
`

func (q *Queries) DeleteSolutionProductsBySolutionID(ctx context.Context, solutionID int64) error {
	_, err := q.db.ExecContext(ctx, deleteSolutionProductsBySolutionID, solutionID)
	return err
}

const deleteSolutionStat = `-- name: DeleteSolutionStat :exec
DELETE FROM solution_stats WHERE id = ?
`

func (q *Queries) DeleteSolutionStat(ctx context.Context, id int64) error {
	_, err := q.db.ExecContext(ctx, deleteSolutionStat, id)
	return err
}

const deleteSolutionStatsBySolutionID = `-- name: DeleteSolutionStatsBySolutionID :exec
DELETE FROM solution_stats WHERE solution_id = ?
`

func (q *Queries) DeleteSolutionStatsBySolutionID(ctx context.Context, solutionID int64) error {
	_, err := q.db.ExecContext(ctx, deleteSolutionStatsBySolutionID, solutionID)
	return err
}

const getActiveSolutionsListingCTA = `-- name: GetActiveSolutionsListingCTA :one

SELECT id, heading, subheading, primary_button_text, primary_button_url, secondary_button_text, secondary_button_url, is_active FROM solutions_listing_cta
WHERE is_active = 1
LIMIT 1
`

// ====================================================================
// SOLUTIONS LISTING CTA
// ====================================================================
func (q *Queries) GetActiveSolutionsListingCTA(ctx context.Context) (SolutionsListingCtum, error) {
	row := q.db.QueryRowContext(ctx, getActiveSolutionsListingCTA)
	var i SolutionsListingCtum
	err := row.Scan(
		&i.ID,
		&i.Heading,
		&i.Subheading,
		&i.PrimaryButtonText,
		&i.PrimaryButtonUrl,
		&i.SecondaryButtonText,
		&i.SecondaryButtonUrl,
		&i.IsActive,
	)
	return i, err
}

const getSolutionByID = `-- name: GetSolutionByID :one
SELECT id, title, slug, icon, short_description, hero_image_url, hero_title, hero_description, overview_content, meta_description, reference_code, is_published, display_order, created_at, updated_at, meta_title, og_image FROM solutions WHERE id = ?
`

func (q *Queries) GetSolutionByID(ctx context.Context, id int64) (Solution, error) {
	row := q.db.QueryRowContext(ctx, getSolutionByID, id)
	var i Solution
	err := row.Scan(
		&i.ID,
		&i.Title,
		&i.Slug,
		&i.Icon,
		&i.ShortDescription,
		&i.HeroImageUrl,
		&i.HeroTitle,
		&i.HeroDescription,
		&i.OverviewContent,
		&i.MetaDescription,
		&i.ReferenceCode,
		&i.IsPublished,
		&i.DisplayOrder,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.MetaTitle,
		&i.OgImage,
	)
	return i, err
}

const getSolutionBySlug = `-- name: GetSolutionBySlug :one
SELECT id, title, slug, icon, short_description, hero_image_url, hero_title, hero_description, overview_content, meta_description, reference_code, is_published, display_order, created_at, updated_at, meta_title, og_image FROM solutions
WHERE slug = ? AND is_published = 1
LIMIT 1
`

func (q *Queries) GetSolutionBySlug(ctx context.Context, slug string) (Solution, error) {
	row := q.db.QueryRowContext(ctx, getSolutionBySlug, slug)
	var i Solution
	err := row.Scan(
		&i.ID,
		&i.Title,
		&i.Slug,
		&i.Icon,
		&i.ShortDescription,
		&i.HeroImageUrl,
		&i.HeroTitle,
		&i.HeroDescription,
		&i.OverviewContent,
		&i.MetaDescription,
		&i.ReferenceCode,
		&i.IsPublished,
		&i.DisplayOrder,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.MetaTitle,
		&i.OgImage,
	)
	return i, err
}

const getSolutionBySlugIncludeDrafts = `-- name: GetSolutionBySlugIncludeDrafts :one
SELECT id, title, slug, icon, short_description, hero_image_url, hero_title, hero_description, overview_content, meta_description, reference_code, is_published, display_order, created_at, updated_at, meta_title, og_image FROM solutions
WHERE slug = ?
LIMIT 1
`

func (q *Queries) GetSolutionBySlugIncludeDrafts(ctx context.Context, slug string) (Solution, error) {
	row := q.db.QueryRowContext(ctx, getSolutionBySlugIncludeDrafts, slug)
	var i Solution
	err := row.Scan(
		&i.ID,
		&i.Title,
		&i.Slug,
		&i.Icon,
		&i.ShortDescription,
		&i.HeroImageUrl,
		&i.HeroTitle,
		&i.HeroDescription,
		&i.OverviewContent,
		&i.MetaDescription,
		&i.ReferenceCode,
		&i.IsPublished,
		&i.DisplayOrder,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.MetaTitle,
		&i.OgImage,
	)
	return i, err
}

const getSolutionCTAs = `-- name: GetSolutionCTAs :many

SELECT id, solution_id, heading, subheading, primary_button_text, primary_button_url, secondary_button_text, secondary_button_url, phone_number, section_name FROM solution_ctas
WHERE solution_id = ?
`

// ====================================================================
// SOLUTION CTAS
// ====================================================================
func (q *Queries) GetSolutionCTAs(ctx context.Context, solutionID int64) ([]SolutionCta, error) {
	rows, err := q.db.QueryContext(ctx, getSolutionCTAs, solutionID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []SolutionCta{}
	for rows.Next() {
		var i SolutionCta
		if err := rows.Scan(
			&i.ID,
			&i.SolutionID,
			&i.Heading,
			&i.Subheading,
			&i.PrimaryButtonText,
			&i.PrimaryButtonUrl,
			&i.SecondaryButtonText,
			&i.SecondaryButtonUrl,
			&i.PhoneNumber,
			&i.SectionName,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getSolutionChallenges = `-- name: GetSolutionChallenges :many

SELECT id, solution_id, title, description, icon, display_order FROM solution_challenges
WHERE solution_id = ?
ORDER BY display_order ASC
`

// ====================================================================
// SOLUTION CHALLENGES
// ====================================================================
func (q *Queries) GetSolutionChallenges(ctx context.Context, solutionID int64) ([]SolutionChallenge, error) {
	rows, err := q.db.QueryContext(ctx, getSolutionChallenges, solutionID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []SolutionChallenge{}
	for rows.Next() {
		var i SolutionChallenge
		if err := rows.Scan(
			&i.ID,
			&i.SolutionID,
			&i.Title,
			&i.Description,
			&i.Icon,
			&i.DisplayOrder,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getSolutionProducts = `-- name: GetSolutionProducts :many

SELECT sp.id, sp.solution_id, sp.product_id, sp.display_order, sp.is_featured,
       p.name AS product_name, p.slug AS product_slug, p.tagline AS product_tagline,
       p.primary_image AS product_image, p.status AS product_status
FROM solution_products sp
JOIN products p ON sp.product_id = p.id
WHERE sp.solution_id = ? AND p.status = 'published'
ORDER BY sp.display_order ASC
`

type GetSolutionProductsRow struct {
	ID             int64          `json:"id"`
	SolutionID     int64          `json:"solution_id"`
	ProductID      int64          `json:"product_id"`
	DisplayOrder   sql.NullInt64  `json:"display_order"`
	IsFeatured     sql.NullBool   `json:"is_featured"`
	ProductName    string         `json:"product_name"`
	ProductSlug    string         `json:"product_slug"`
	ProductTagline sql.NullString `json:"product_tagline"`
	ProductImage   sql.NullString `json:"product_image"`
	ProductStatus  string         `json:"product_status"`
}

// ====================================================================
// SOLUTION PRODUCTS
// ====================================================================
func (q *Queries) GetSolutionProducts(ctx context.Context, solutionID int64) ([]GetSolutionProductsRow, error) {
	rows, err := q.db.QueryContext(ctx, getSolutionProducts, solutionID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetSolutionProductsRow{}
	for rows.Next() {
		var i GetSolutionProductsRow
		if err := rows.Scan(
			&i.ID,
			&i.SolutionID,
			&i.ProductID,
			&i.DisplayOrder,
			&i.IsFeatured,
			&i.ProductName,
			&i.ProductSlug,
			&i.ProductTagline,
			&i.ProductImage,
			&i.ProductStatus,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getSolutionStats = `-- name: GetSolutionStats :many

SELECT id, solution_id, value, label, display_order FROM solution_stats
WHERE solution_id = ?
ORDER BY display_order ASC
`

// ====================================================================
// SOLUTION STATS
// ====================================================================
func (q *Queries) GetSolutionStats(ctx context.Context, solutionID int64) ([]SolutionStat, error) {
	rows, err := q.db.QueryContext(ctx, getSolutionStats, solutionID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []SolutionStat{}
	for rows.Next() {
		var i SolutionStat
		if err := rows.Scan(
			&i.ID,
			&i.SolutionID,
			&i.Value,
			&i.Label,
			&i.DisplayOrder,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listAllSolutionPageFeatures = `-- name: ListAllSolutionPageFeatures :many
SELECT id, title, description, icon, display_order, is_active FROM solution_page_features
ORDER BY display_order ASC
`

func (q *Queries) ListAllSolutionPageFeatures(ctx context.Context) ([]SolutionPageFeature, error) {
	rows, err := q.db.QueryContext(ctx, listAllSolutionPageFeatures)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []SolutionPageFeature{}
	for rows.Next() {
		var i SolutionPageFeature
		if err := rows.Scan(
			&i.ID,
			&i.Title,
			&i.Description,
			&i.Icon,
			&i.DisplayOrder,
			&i.IsActive,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listAllSolutions = `-- name: ListAllSolutions :many
SELECT id, title, slug, icon, short_description, hero_image_url, hero_title, hero_description, overview_content, meta_description, reference_code, is_published, display_order, created_at, updated_at, meta_title, og_image FROM solutions ORDER BY display_order ASC, title ASC
`

func (q *Queries) ListAllSolutions(ctx context.Context) ([]Solution, error) {
	rows, err := q.db.QueryContext(ctx, listAllSolutions)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Solution{}
	for rows.Next() {
		var i Solution
		if err := rows.Scan(
			&i.ID,
			&i.Title,
			&i.Slug,
			&i.Icon,
			&i.ShortDescription,
			&i.HeroImageUrl,
			&i.HeroTitle,
			&i.HeroDescription,
			&i.OverviewContent,
			&i.MetaDescription,
			&i.ReferenceCode,
			&i.IsPublished,
			&i.DisplayOrder,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.MetaTitle,
			&i.OgImage,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listPublishedSolutions = `-- name: ListPublishedSolutions :many

SELECT id, title, slug, icon, short_description, display_order, created_at, updated_at
FROM solutions
WHERE is_published = 1
ORDER BY display_order ASC, title ASC
`

type ListPublishedSolutionsRow struct {
	ID               int64         `json:"id"`
	Title            string        `json:"title"`
	Slug             string        `json:"slug"`
	Icon             string        `json:"icon"`
	ShortDescription string        `json:"short_description"`
	DisplayOrder     sql.NullInt64 `json:"display_order"`
	CreatedAt        sql.NullTime  `json:"created_at"`
	UpdatedAt        sql.NullTime  `json:"updated_at"`
}

// ====================================================================
// SOLUTIONS
// ====================================================================
func (q *Queries) ListPublishedSolutions(ctx context.Context) ([]ListPublishedSolutionsRow, error) {
	rows, err := q.db.QueryContext(ctx, listPublishedSolutions)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ListPublishedSolutionsRow{}
	for rows.Next() {
		var i ListPublishedSolutionsRow
		if err := rows.Scan(
			&i.ID,
			&i.Title,
			&i.Slug,
			&i.Icon,
			&i.ShortDescription,
			&i.DisplayOrder,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listSolutionPageFeatures = `-- name: ListSolutionPageFeatures :many

SELECT id, title, description, icon, display_order, is_active FROM solution_page_features
WHERE is_active = 1
ORDER BY display_order ASC
`

// ====================================================================
// SOLUTION PAGE FEATURES (Why Choose BlueJay)
// ====================================================================
func (q *Queries) ListSolutionPageFeatures(ctx context.Context) ([]SolutionPageFeature, error) {
	rows, err := q.db.QueryContext(ctx, listSolutionPageFeatures)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []SolutionPageFeature{}
	for rows.Next() {
		var i SolutionPageFeature
		if err := rows.Scan(
			&i.ID,
			&i.Title,
			&i.Description,
			&i.Icon,
			&i.DisplayOrder,
			&i.IsActive,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listSolutionsAdminFiltered = `-- name: ListSolutionsAdminFiltered :many
SELECT id, title, slug, icon, short_description, hero_image_url, hero_title, hero_description, overview_content, meta_description, reference_code, is_published, display_order, created_at, updated_at, meta_title, og_image FROM solutions
WHERE
    (CASE WHEN ?1 = '' THEN 1 ELSE
        (CASE WHEN ?1 = 'published' THEN is_published = 1
              WHEN ?1 = 'draft' THEN (is_published = 0 OR is_published IS NULL)
              ELSE 1 END)
    END)
    AND (CASE WHEN ?2 = '' THEN 1 ELSE (title LIKE '%' || ?2 || '%') END)
ORDER BY display_order ASC, title ASC
LIMIT ?4 OFFSET ?3
`

type ListSolutionsAdminFilteredParams struct {
	FilterStatus interface{} `json:"filter_status"`
	FilterSearch interface{} `json:"filter_search"`
	PageOffset   int64       `json:"page_offset"`
	PageLimit    int64       `json:"page_limit"`
}

func (q *Queries) ListSolutionsAdminFiltered(ctx context.Context, arg ListSolutionsAdminFilteredParams) ([]Solution, error) {
	rows, err := q.db.QueryContext(ctx, listSolutionsAdminFiltered,
		arg.FilterStatus,
		arg.FilterSearch,
		arg.PageOffset,
		arg.PageLimit,
	)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Solution{}
	for rows.Next() {
		var i Solution
		if err := rows.Scan(
			&i.ID,
			&i.Title,
			&i.Slug,
			&i.Icon,
			&i.ShortDescription,
			&i.HeroImageUrl,
			&i.HeroTitle,
			&i.HeroDescription,
			&i.OverviewContent,
			&i.MetaDescription,
			&i.ReferenceCode,
			&i.IsPublished,
			&i.DisplayOrder,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.MetaTitle,
			&i.OgImage,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const removeProductFromSolution = `-- name: RemoveProductFromSolution :exec
DELETE FROM solution_products
WHERE solution_id = ? AND product_id = ?
`

type RemoveProductFromSolutionParams struct {
	SolutionID int64 `json:"solution_id"`
	ProductID  int64 `json:"product_id"`
}

func (q *Queries) RemoveProductFromSolution(ctx context.Context, arg RemoveProductFromSolutionParams) error {
	_, err := q.db.ExecContext(ctx, removeProductFromSolution, arg.SolutionID, arg.ProductID)
	return err
}

const updateSolution = `-- name: UpdateSolution :exec
UPDATE solutions
SET title = ?, slug = ?, icon = ?, short_description = ?,
    hero_image_url = ?, hero_title = ?, hero_description = ?,
    overview_content = ?, meta_description = ?, reference_code = ?,
    is_published = ?, display_order = ?, updated_at = CURRENT_TIMESTAMP
WHERE id = ?
`

type UpdateSolutionParams struct {
	Title            string         `json:"title"`
	Slug             string         `json:"slug"`
	Icon             string         `json:"icon"`
	ShortDescription string         `json:"short_description"`
	HeroImageUrl     sql.NullString `json:"hero_image_url"`
	HeroTitle        sql.NullString `json:"hero_title"`
	HeroDescription  sql.NullString `json:"hero_description"`
	OverviewContent  sql.NullString `json:"overview_content"`
	MetaDescription  sql.NullString `json:"meta_description"`
	ReferenceCode    sql.NullString `json:"reference_code"`
	IsPublished      sql.NullBool   `json:"is_published"`
	DisplayOrder     sql.NullInt64  `json:"display_order"`
	ID               int64          `json:"id"`
}

func (q *Queries) UpdateSolution(ctx context.Context, arg UpdateSolutionParams) error {
	_, err := q.db.ExecContext(ctx, updateSolution,
		arg.Title,
		arg.Slug,
		arg.Icon,
		arg.ShortDescription,
		arg.HeroImageUrl,
		arg.HeroTitle,
		arg.HeroDescription,
		arg.OverviewContent,
		arg.MetaDescription,
		arg.ReferenceCode,
		arg.IsPublished,
		arg.DisplayOrder,
		arg.ID,
	)
	return err
}

const updateSolutionCTA = `-- name: UpdateSolutionCTA :exec
UPDATE solution_ctas
SET heading = ?, subheading = ?, primary_button_text = ?,
    primary_button_url = ?, secondary_button_text = ?,
    secondary_button_url = ?, phone_number = ?, section_name = ?
WHERE id = ?
`

type UpdateSolutionCTAParams struct {
	Heading             string         `json:"heading"`
	Subheading          sql.NullString `json:"subheading"`
	PrimaryButtonText   sql.NullString `json:"primary_button_text"`
	PrimaryButtonUrl    sql.NullString `json:"primary_button_url"`
	SecondaryButtonText sql.NullString `json:"secondary_button_text"`
	SecondaryButtonUrl  sql.NullString `json:"secondary_button_url"`
	PhoneNumber         sql.NullString `json:"phone_number"`
	SectionName         string         `json:"section_name"`
	ID                  int64          `json:"id"`
}

func (q *Queries) UpdateSolutionCTA(ctx context.Context, arg UpdateSolutionCTAParams) error {
	_, err := q.db.ExecContext(ctx, updateSolutionCTA,
		arg.Heading,
		arg.Subheading,
		arg.PrimaryButtonText,
		arg.PrimaryButtonUrl,
		arg.SecondaryButtonText,
		arg.SecondaryButtonUrl,
		arg.PhoneNumber,
		arg.SectionName,
		arg.ID,
	)
	return err
}

const updateSolutionChallenge = `-- name: UpdateSolutionChallenge :exec
UPDATE solution_challenges
SET title = ?, description = ?, icon = ?, display_order = ?
WHERE id = ?
`

type UpdateSolutionChallengeParams struct {
	Title        string        `json:"title"`
	Description  string        `json:"description"`
	Icon         string        `json:"icon"`
	DisplayOrder sql.NullInt64 `json:"display_order"`
	ID           int64         `json:"id"`
}

func (q *Queries) UpdateSolutionChallenge(ctx context.Context, arg UpdateSolutionChallengeParams) error {
	_, err := q.db.ExecContext(ctx, updateSolutionChallenge,
		arg.Title,
		arg.Description,
		arg.Icon,
		arg.DisplayOrder,
		arg.ID,
	)
	return err
}

const updateSolutionPageFeature = `-- name: UpdateSolutionPageFeature :exec
UPDATE solution_page_features
SET title = ?, description = ?, icon = ?, display_order = ?, is_active = ?
WHERE id = ?
`

type UpdateSolutionPageFeatureParams struct {
	Title        string        `json:"title"`
	Description  string        `json:"description"`
	Icon         string        `json:"icon"`
	DisplayOrder sql.NullInt64 `json:"display_order"`
	IsActive     sql.NullBool  `json:"is_active"`
	ID           int64         `json:"id"`
}

func (q *Queries) UpdateSolutionPageFeature(ctx context.Context, arg UpdateSolutionPageFeatureParams) error {
	_, err := q.db.ExecContext(ctx, updateSolutionPageFeature,
		arg.Title,
		arg.Description,
		arg.Icon,
		arg.DisplayOrder,
		arg.IsActive,
		arg.ID,
	)
	return err
}

const updateSolutionStat = `-- name: UpdateSolutionStat :exec
UPDATE solution_stats
SET value = ?, label = ?, display_order = ?
WHERE id = ?
`

type UpdateSolutionStatParams struct {
	Value        string        `json:"value"`
	Label        string        `json:"label"`
	DisplayOrder sql.NullInt64 `json:"display_order"`
	ID           int64         `json:"id"`
}

func (q *Queries) UpdateSolutionStat(ctx context.Context, arg UpdateSolutionStatParams) error {
	_, err := q.db.ExecContext(ctx, updateSolutionStat,
		arg.Value,
		arg.Label,
		arg.DisplayOrder,
		arg.ID,
	)
	return err
}

const updateSolutionsListingCTA = `-- name: UpdateSolutionsListingCTA :exec
UPDATE solutions_listing_cta
SET heading = ?, subheading = ?, primary_button_text = ?,
    primary_button_url = ?, secondary_button_text = ?,
    secondary_button_url = ?, is_active = ?
WHERE id = ?
`

type UpdateSolutionsListingCTAParams struct {
	Heading             string         `json:"heading"`
	Subheading          sql.NullString `json:"subheading"`
	PrimaryButtonText   sql.NullString `json:"primary_button_text"`
	PrimaryButtonUrl    sql.NullString `json:"primary_button_url"`
	SecondaryButtonText sql.NullString `json:"secondary_button_text"`
	SecondaryButtonUrl  sql.NullString `json:"secondary_button_url"`
	IsActive            sql.NullBool   `json:"is_active"`
	ID                  int64          `json:"id"`
}

func (q *Queries) UpdateSolutionsListingCTA(ctx context.Context, arg UpdateSolutionsListingCTAParams) error {
	_, err := q.db.ExecContext(ctx, updateSolutionsListingCTA,
		arg.Heading,
		arg.Subheading,
		arg.PrimaryButtonText,
		arg.PrimaryButtonUrl,
		arg.SecondaryButtonText,
		arg.SecondaryButtonUrl,
		arg.IsActive,
		arg.ID,
	)
	return err
}
